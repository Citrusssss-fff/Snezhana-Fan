function t136_init(e,t){var o=document.getElementById("rec"+e);if(o){if(t){if(void 0===window.isMobile){var r=Date.now();setTimeout((function o(){var n=Date.now();"boolean"!=typeof window.isMobile?"complete"===document.readyState&&n-r>1e3&&"boolean"!=typeof window.isMobile||setTimeout(o,100):t136_init(e,t)}))}var n=o.querySelectorAll(".txt-holder");Array.prototype.forEach.call(n,(function(e){e.style.backgroundColor="transparent"})),!1===window.isMobile&&window.sequenceController.registerNewBlock(o)}else{var n=o.querySelectorAll(".txt-holder"),i=o.querySelectorAll(".t136__background");Array.prototype.forEach.call(n,(function(e){e.style.top="",e.style.position="relative"})),Array.prototype.forEach.call(i,(function(e){e.style.height=window.sequenceController.itemHeight+"px"}))}if(window.isMobile){var l=o.querySelectorAll('[data-hook="item-background"]'),c=o.querySelectorAll('[data-hook="sequence-item"]');Array.prototype.forEach.call(l,(function(e){e.style.backgroundImage="url("+e.getAttribute("data-image-src")+")"})),Array.prototype.forEach.call(c,(function(e){e.querySelector("[data-hook='item-background']").style.height=window.sequenceController.itemHeight+"px",e.querySelector(".txt-holder").style.position="relative",e.querySelector(".txt-holder").style.backgroundColor="#000",e.style.backgroundColor="#000"}))}else{var s=o.querySelectorAll("div[data-content-video-url-youtube]");Array.prototype.forEach.call(s,(function(e){t_onFuncLoad("processYoutubeVideo",(function(){var t=window.getComputedStyle(e).height;processYoutubeVideo(e,t)}))}))}}}function SequenceController(){this.setScrollCb(),this.itemHeight=screen.availHeight;var e=.25;this.itemTransitionTop=this.itemHeight*e,this.activeItemIndex=null,this.windowHeight=document.documentElement.clientHeight||window.innerHeight||screen.availHeight,this.topOffsetShift=-150,$(window).resize(jQuery.proxy(this.recalculateAllSequencesOffsets,this)),this._resizeInterval=setInterval(jQuery.proxy(this.scrollCb,this),500)}function t_onFuncLoadVideo(e){"function"==typeof $.fn.videoBG?e():setTimeout((function t(){if("function"!=typeof $.fn.videoBG){if("complete"===document.readyState&&"function"!=typeof $.fn.videoBG)throw new Error("$.fn.videoBG is undefined");setTimeout(t,100)}else e()}))}window.processVideo=function(e){var t=$(e).attr("data-content-video-url-mp4"),o=$(e).attr("data-content-video-url-webm");$(e).css("background-color","transparent"),$(e).css("background-image","");var r={mp4:t,webm:o,preload:"none",autoplay:!1,loop:!0,scale:!0,zIndex:0,width:"100%"};t_onFuncLoadVideo((function(){var t=$(e).videoBG(r);videoLoadProcessor.registerNewVideo(t,{isNeedStop:!1})}))},SequenceController.prototype.defaultConfig={orientation:"vertical",speedFactor:1,automated:!1},SequenceController.prototype.sequenceObjects=[],SequenceController.prototype.recalculateAllSequencesOffsets=function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeInterval&&clearInterval(this._resizeInterval),this._resizeTimeout=setTimeout(jQuery.proxy((function(){this.scrollCb(),this._resizeInterval=setInterval(jQuery.proxy(this.scrollCb,this),500)}),this),10)},SequenceController.prototype.registerNewBlock=function(e){if(!(e instanceof HTMLElement))throw new Error("Wrong node type in registerNewBlock");for(var t=0,o=this.sequenceObjects.length;t<o;t++)if(this.sequenceObjects[t].sequenceBlock===e)return!1;var r=e.querySelector('[data-hook="sequence-holder"]'),n=0,i=this.getAbsoluteTopOffset(r),l=function(){var t=Array.prototype.slice.call(e.querySelectorAll('[data-hook="sequence-item"]'),0),o=[];return t.forEach(jQuery.proxy((function(e,t,r){var i=this.getItemHeight(e),l=e.querySelector('[data-hook="item-background"]');e.style.height=i+"px",l.style.height=this.itemHeight+"px",t<r.length-1&&(n+=i),o.push({node:e,height:i,topOffset:this.getAbsoluteTopOffset(e.querySelector(".txt-holder"))-(t==r.length-1?0:this.topOffsetShift),backgroundHolder:l})}),this)),o}.call(this),c={sequenceBlock:e,sequenceHolder:r,sequenceHolderTopOffset:i,sequenceHeight:n,items:l,started:!1,prevBackgroundColor:""};return this.sequenceObjects.push(c),this.scrollCb(),!0},SequenceController.prototype.getItemHeight=function(e){var t=e.querySelector("[data-hook='item-text']"),o=parseFloat(getComputedStyle(t).top),r;return t.style.top=o+"px",Math.max(t.clientHeight+o,this.itemHeight)},SequenceController.prototype.fixTextBlocksPosition=function(e){var t;Array.prototype.slice.call(e.querySelectorAll('[data-hook="item-text"]'),0).forEach((function(e){var t;e.parentNode.querySelector("[data-hook='item-background']").style.top="-"+e.clientHeight+"px"}))},SequenceController.prototype.unergisterBlock=function(e){for(var t=0,o=this.sequenceObjects.length,r=null;t<o;t++)if(this.sequenceObjects[t].sequenceBlock===e){r=t;break}return null!==r&&(this.sequenceObjects.splice(r,1),!0)},SequenceController.prototype.getAbsoluteTopOffset=function(e){var t=e.offsetTop;for(e=e.offsetParent;null!=e;)t+=e.offsetTop,e=e.offsetParent;return t},SequenceController.prototype.processSequence=function(e){0==e.started&&(e.prevBackgroundColor=document.body.style.backgroundColor,document.body.style.backgroundColor="rgb(0, 0, 0)",e.started=!0);for(var t=e.items,o=null,r,n,i,l=0,c=t.length,s;l<c;l++)if((s=(r=t[l].node).getBoundingClientRect()).top<this.itemTransitionTop&&s.bottom<s.height+this.itemTransitionTop&&s.bottom>this.itemTransitionTop){o=l;break}if(null!=o){(i=s.top/this.itemTransitionTop)>1?i=1:i<0&&(i=0);for(var l=0,c=t.length;l<c;l++)r=t[l].node,"fixed"!=(n=t[l].backgroundHolder.style).position&&(n.position="fixed"),l==o?(n.opacity=1-i,r.querySelector(".txt-holder").style.opacity=1-i):l==o-1?(n.opacity=i,r.querySelector(".txt-holder").style.opacity=i):(n.opacity=0,r.querySelector(".txt-holder").style.opacity=0)}},SequenceController.prototype.stopSequence=function(e){0!=e.started&&(e.items.forEach((function(e){e.backgroundHolder.style.position="relative",e.backgroundHolder.style.display="block",e.backgroundHolder.style.opacity=1})),document.body.style.backgroundColor=e.prevBackgroundColor,e.started=!1)},SequenceController.prototype.scrollCb=function(){for(var e=0,t=this.sequenceObjects.length,o;e<t;e++){var r=(o=this.sequenceObjects[e]).sequenceHolder.getBoundingClientRect();r.top<0&&r.bottom>0&&r.bottom>r.height-o.sequenceHeight-100?this.processSequence(o):this.stopSequence(o)}},SequenceController.prototype.setScrollCb=function(){this._scrollCb=jQuery.proxy(this.scrollCb,this),$(window).scroll(this._scrollCb)},window.sequenceController=new SequenceController;
